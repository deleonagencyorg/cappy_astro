---
// src/components/common/Footer/index.astro
import { t, type Locale } from '../../../i18n/i18n';
import './styles.css';
import Skeleton from './Skeleton.astro';
import LazyImage from '../LazyImage.astro';

export interface Props {
  currentLang: Locale;
  loading?: boolean;
}

const { currentLang, loading = false } = Astro.props;

const menuItems = (t('menu_items', { namespace: 'common', locale: currentLang }) || []) as any[];
const year = new Date().getFullYear();

const headline = currentLang === 'es'
  ? 'Si necesitas diversión, es Cappy'
  : 'If you need fun, it\'s Cappy';

// Imagen del león (mock). Si deseas otra URL, dime y la cambio.
const lionImageUrl = 'https://snack.yummiespromociones.com/SnacksyummiesAssets/cappy leon41.webp';

const supportTitle = currentLang === 'es' ? 'Soporte' : 'Support';
const homeTitle = currentLang === 'es' ? 'Inicio' : 'Home';

const privacyText = currentLang === 'es' ? 'Política de privacidad' : 'Privacy Policy';
const termsText = currentLang === 'es' ? 'Términos de uso' : 'Terms of Use';
const cookiesText = currentLang === 'es' ? 'Política de cookies' : 'Cookie Policy';

const privacyUrl = t('footer.privacy_policy_url', { namespace: 'common', locale: currentLang }) || (currentLang === 'es' ? '/es/politica-privacidad' : '/en/privacy-policy');
const termsUrl = currentLang === 'es' ? '/es/terminos-y-condiciones' : '/en/terms-and-conditions';
const cookiesUrl = currentLang === 'es' ? '/es/politica-cookies' : '/en/cookie-policy';
---

{loading ? (
  <Skeleton />
) : (
  <footer class="bg-primary text-black relative overflow-hidden z-10">
    <div class="container mx-auto px-4 md:px-6 py-10">
      <div class="rounded-[32px] bg-tertiary px-6 md:px-10 py-10">
        <div class="grid grid-cols-1 md:grid-cols-2 gap-10 items-center">
          <!-- Content (first on mobile) -->
          <div class="order-1 md:order-2">
            <h3 class="font-title text-4xl md:text-6xl font-bold text-[#0b2f87] leading-tight">
              {headline}
            </h3>

            <div class="mt-10 grid grid-cols-2 gap-10">
              <div>
                <h4 class="font-title text-2xl font-bold text-[#0b2f87]">{homeTitle}</h4>
                <div class="mt-4 flex flex-col gap-2">
                  {menuItems.map((item: any) => (
                    <a href={item.href} class="font-sans text-base hover:opacity-80">
                      {item.text}
                    </a>
                  ))}
                </div>
              </div>
              <div>
                <h4 class="font-title text-2xl font-bold text-[#0b2f87]">{supportTitle}</h4>
                <div class="mt-4 flex flex-col gap-2">
                  <a href={privacyUrl} class="font-sans text-base hover:opacity-80">{privacyText}</a>
                  <a href={termsUrl} class="font-sans text-base hover:opacity-80">{termsText}</a>
                  <a href={cookiesUrl} class="font-sans text-base hover:opacity-80">{cookiesText}</a>
                </div>
              </div>
            </div>

            <div class="mt-10 text-center md:text-left font-sans text-sm text-black/80">
              © {year} Cappy - {currentLang === 'es' ? 'Todos los derechos reservados' : 'All rights reserved'}
            </div>
          </div>

          <!-- Lion image (last on mobile) -->
          <div class="order-2 md:order-1 flex justify-center md:justify-start">
            <LazyImage
              src={lionImageUrl}
              alt="Cappy"
              class="w-full  h-auto"
              width={1040}
              height={1040}
              loading="lazy"
            />
          </div>
        </div>
      </div>
    </div>
  </footer>
)}

